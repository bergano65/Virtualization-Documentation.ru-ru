---
title: &256161350 Создание виртуального коммутатора
description: Создание виртуального коммутатора
keywords: windows 10, hyper-v
author: neilpeterson
manager: timlt
ms.date: 05/02/2016
ms.topic: article
ms.prod: &278168364 windows-10-hyperv
ms.service: windows-10-hyperv
ms.assetid: 532195c6-564b-4954-97c2-5a5795368c09
---

# Создание виртуального коммутатора

Перед созданием виртуальной машины в Hyper-V может потребоваться указать способ подключения этой виртуальной машины к физической сети. Hyper-V включает программную сетевую технологию, позволяющую сетевому адаптеру виртуальных машин подключаться к виртуальному коммутатору, предоставляя возможность подключения к сети. Каждый виртуальный коммутатор, созданный в Hyper-V, можно настроить с помощью одного из трех типов подключения, описанных ниже.

- <g id="1" ctype="x-strong">Внешняя сеть</g> — виртуальный коммутатор подключен к физическому сетевому адаптеру, который позволяет устанавливать подключение между физической сетью, узлом Hyper-V и виртуальной машиной. В такой конфигурации можно также включить или отключить возможность узлов обмениваться данными по сетевому адаптеру с физическим подключением. Это может быть полезно для изоляции трафика виртуальных машин в определенном физическом сетевом адаптере.

- <g id="1" ctype="x-strong">Внутренняя сеть</g> — виртуальный коммутатор не подключен к физическому сетевому адаптеру. Однако между узлом Hyper-V и виртуальными машинами, подключенными к этому коммутатору, установлено сетевое подключение.

- <g id="1" ctype="x-strong">Частная сеть</g> — виртуальный коммутатор не подключен к физическому сетевому адаптеру, а соединение между узлом Hyper-V и виртуальными машинами, подключенными к этому коммутатору, не установлено.

## Создание виртуального коммутатора вручную

В рамках этого упражнения рассматривается создание внешнего виртуального коммутатора с помощью диспетчера Hyper-V. После завершения этого упражнения узел Hyper-V будет содержать виртуальный коммутатор, который можно использовать для подключения виртуальных машин к физической сети.

1. Откройте диспетчер Hyper-V.

2. Щелкните имя узла Hyper-V правой кнопкой мыши и выберите <g id="2" ctype="x-strong">Диспетчер виртуальных коммутаторов...</g>

3. В разделе "Виртуальные коммутаторы" выберите <g id="2" ctype="x-strong">Создать виртуальный сетевой коммутатор</g>.

4. В разделе "Виртуальный коммутатор какого типа вы хотите создать?" выберите <g id="2" ctype="x-strong">Внешний</g>.

5. Нажмите кнопку <g id="2" ctype="x-strong">Создать виртуальный коммутатор</g>.

6. В разделе "Свойства виртуального коммутатора" присвойте новому коммутатору имя, например <g id="2" ctype="x-strong">Внешний коммутатор виртуальных машин</g>.

7. Убедитесь, что в разделе "Тип подключения" выбран параметр <g id="2" ctype="x-strong">Внешняя сеть</g>.

8. Выберите физический сетевой адаптер для связывания с новым виртуальным коммутатором. Этот сетевой адаптер физически подключен к сети.

    <g id="1" ctype="x-linkText"></g>

9. Щелкните <g id="2" ctype="x-strong">Применить</g>, чтобы создать виртуальный коммутатор. На этом этапе, скорее всего, появится приведенное ниже сообщение. Для продолжения нажмите кнопку <g id="2" ctype="x-strong">Да</g>.

    <g id="1" ctype="x-linkText"></g>

10. Щелкните <g id="2" ctype="x-strong">ОК</g>, чтобы закрыть окно диспетчера виртуальных коммутаторов.

## Создание виртуального коммутатора с помощью PowerShell

Чтобы создать виртуальный коммутатор с внешним подключением с помощью PowerShell:

1. Используйте командлет <g id="2" ctype="x-strong">Get-NetAdapter</g>, чтобы получить список сетевых адаптеров, подключенных к системе Windows 10.

    ```powershell
    PS C:\> Get-NetAdapter

    Name                      InterfaceDescription                    ifIndex Status       MacAddress             LinkSpeed
    ----                      --------------------                    ------- ------       ----------             ---------
    Ethernet 2                Broadcom NetXtreme 57xx Gigabit Cont...       5 Up           BC-30-5B-A8-C1-7F         1 Gbps
    Ethernet                  Intel(R) PRO/100 M Desktop Adapter            3 Up           00-0E-0C-A8-DC-31        10 Mbps  
    ```

2. Выберите нужный сетевой адаптер для использования с коммутатором Hyper-V и разместите экземпляр в переменной с именем <g id="2" ctype="x-strong">$net</g>.

    ```
    $net = Get-NetAdapter -Name 'Ethernet'
    ```

3. Выполните следующую команду, чтобы создать новый виртуальный коммутатор Hyper-V.

    ```
    New-VMSwitch -Name "External VM Switch" -AllowManagementOS $True -NetAdapterName $net.Name
    ```

## Виртуальные коммутаторы и ноутбуки

Если Hyper-V под управлением Windows 10 работает на ноутбуке, вам может понадобиться создать виртуальный коммутатор для сетевых адаптеров Ethernet и беспроводных сетей. В такой конфигурации можно переключать виртуальные машины между этими коммутаторами в зависимости от типа сетевого подключения ноутбука. Виртуальные машины не будут автоматически переключаться между проводными и беспроводными сетями.

## Следующий шаг — создание виртуальной машины

<g id="1CapsExtId1" ctype="x-link"><g id="1CapsExtId2" ctype="x-linkText">Создание виртуальной машины Windows</g><g id="1CapsExtId3" ctype="x-title"></g></g>






<!--HONumber=May16_HO2-->


