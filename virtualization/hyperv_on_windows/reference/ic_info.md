---
title: "Службы интеграции Hyper-V"
description: "Справочник по службам интеграции Hyper-V"
keywords: windows 10, hyper-v, integration services, integration components
author: scooley
manager: timlt
ms.date: 05/25/2016
ms.topic: article
ms.prod: windows-10-hyperv
ms.service: windows-10-hyperv
ms.assetid: 18930864-476a-40db-aa21-b03dfb4fda98
translationtype: Human Translation
ms.sourcegitcommit: eae8f504039a1b3732ecfb31b8068667aab104f9
ms.openlocfilehash: 633a6b2f3fe737a6e7515fd3f923335e39cf9d17

---

# Службы интеграции Hyper-V

Службы интеграции (часто называемые компонентами интеграции) — это службы, позволяющие виртуальной машине связываться с узлом Hyper-V. Многие из этих служб используются для удобства, а другие могут быть достаточно важны для правильной работы виртуальной машины.

В этой статье приведены справочные сведения по каждой из служб интеграции, доступной в Windows.  Она также является отправной точкой для получения любых сведений, связанных с конкретными службами интеграции и их историей.


## Краткий справочник

| Название | Название службы Windows | Имя управляющей программы Linux |  Описание | Влияние на виртуальную машину при отключении |
|:---------|:---------|:---------|:---------|:---------|
| [Служба пульса (Hyper-V)](#hyper-v-heartbeat-service) |  vmicheartbeat | hv_utils | Сообщает, что виртуальная машина работает нормально. | Различается |
| [Служба завершения работы в качестве гостя (Hyper-V)](#hyper-v-guest-shutdown-service) | vmicshutdown | hv_utils |  Позволяет узлу управлять выключением виртуальных машин. | **высоко-** |
| [Служба синхронизации времени Hyper-V](#hyper-v-time-synchronization-service) | vmictimesync | hv_utils | Синхронизирует время виртуальной машины со временем на главном компьютере. | **высоко-** |
| [Служба обмена данными Hyper-V (KVP)](#hyper-v-data-exchange-service-kvp) | vmickvpexchange | hv_kvp_daemon | Позволяет виртуальной машине и узлу обмениваться между собой простыми метаданными. | Средняя |
| [Служба запросов на теневое копирование томов Hyper-V](#hyper-v-volume-shadow-copy-requestor) | vmicvss | hv_vss_daemon | Позволяет службе теневого копирования томов выполнить резервное копирование виртуальной машины без ее выключения. | Различается |
| [Интерфейс гостевой службы Hyper-V](#hyper-v-powershell-direct-service) | vmicguestinterface | hv_fcopy_daemon | Предоставляет интерфейс для узла Hyper-V для копирования файлов с виртуальной машины и на виртуальную машину. | Низкий |
| [Служба PowerShell Direct для Hyper-V](#hyper-v-powershell-direct-service) | vmicvmsession | недоступен | Позволяет управлять виртуальной машиной с помощью PowerShell без подключения к сети. | Низкий |  


## Служба пульса (Hyper-V)

**Имя службы Windows:** vmicheartbeat  
**Имя управляющей программы Linux:** hv_utils  
**Описание.** Сообщает узлу Hyper-V, что на виртуальной машине установлена операционная система и что она загрузилась надлежащим образом.  
**Добавлено в:** Windows Server 2012, Windows 8  
**Влияние.** При отключении виртуальная машина не может сообщать о корректной работе своей операционной системы.  Это может повлиять на некоторые виды мониторинга и диагностики на стороне узла.  

Служба пульсов позволяет ответить на простые вопросы, например: "Загрузилась ли виртуальная машина?".  

Когда Hyper-V сообщает, что состояние виртуальной машины — "Запущена" (см. пример ниже), это означает, что Hyper-V выделил ресурсы для виртуальной машины, и это не означает, что на виртуальной машине установлена или нормально работает операционная система.  Здесь оказывается полезной служба пульсов.  Служба пульсов сообщает Hyper-V о том, что операционная система на виртуальной машине загрузилась.  

### Проверка пульсов с помощью PowerShell

Запустите [Get-VM](https://technet.microsoft.com/en-us/library/hh848479.aspx) от имени администратора, чтобы увидеть пульсы от виртуальной машины:
``` PowerShell
Get-VM -VMName $VMName | select Name, State, Status
```

Выходные данные должны иметь следующий вид:
```
Name    State    Status
----    -----    ------
DemoVM  Running  Operating normally
```

Поле `Status` определяется службой пульсов.



## Служба завершения работы в качестве гостя (Hyper-V)

**Имя службы Windows:** vmicshutdown  
**Имя управляющей программы Linux:** hv_utils  
**Описание.** Позволяет узлу Hyper-V запрашивать завершение работы виртуальной машины.  Узел всегда может принудительно выключить виртуальную машину, но это похоже на щелканье выключателем в отличие от корректного завершения работы.
**Добавлено в:** Windows Server 2012, Windows 8  
**Влияние:** **высокая степень влияния**. При отключении узел не сможет корректно завершить работу виртуальной машины.  Выключение будет только жестким, что может привести к потере или повреждению данных.


## Служба синхронизации времени Hyper-V

**Имя службы Windows:** vmictimesync  
**Имя управляющей программы Linux:** hv_utils  
**Описание:** Синхронизирует системное время виртуальной машины с системным временем физического компьютера.  
**Добавлено в:** Windows Server 2012, Windows 8  
**Влияние:** **высокая степень влияния**. При отключении время на виртуальной машине будет случайным образом отклоняться от времени компьютера.  


## Служба обмена данными Hyper-V (KVP)

**Имя службы Windows:** vmickvpexchange  
**Имя управляющей программы Linux:** hv_kvp_daemon  
**Описание.** Предоставляет механизм для обмена простыми метаданными между виртуальной машиной и узлом.  
**Добавлено в:** Windows Server 2012, Windows 8  
**Влияние.** При отключении виртуальных машин с Windows 8 или Windows Server 2012 или более ранней версии они не будут получать обновления для служб интеграции Hyper-V.  Отключение обмена данными также может повлиять на некоторые виды мониторинга и диагностики на стороне узла.

Служба обмена данными (иногда называемая KVP) предоставляет небольшой объем данных о виртуальной машине узлу Hyper-V (и наоборот) с помощью пар "ключ-значение" (KVP) в реестре Windows.  Тот же механизм может также применяться для совместного использования настроенных данных виртуальной машиной и узлом.

Пары "ключ-значение" состоят из ключа и значения. И ключ, и значение являются строками, другие типы данных не поддерживаются. При создании или изменении пары "ключ-значение" она доступна как в гостевой ОС, так и на узле. Данные из пары "ключ-значение" передаются через шину VMbus Hyper-V и не требуют никакого сетевого подключения между гостевой ОС и узлом Hyper-V. 

Служба обмена данными — это мощный инструмент для сохранения данных о виртуальной машине; для совместного использования интерактивных данных или передачи данных используйте [PowerShell Direct](#hyper-v-powershell-direct-service). 


**Руководства пользователя:**  
* [Data Exchange: Using key-value pairs to share information between the host and guest on Hyper-V](https://technet.microsoft.com/en-us/library/dn798287.aspx) (Использование пар "ключ-значение" для совместного использования информации на узле и в гостевой ОС Hyper-V).


## Служба запросов на теневое копирование томов Hyper-V

**Имя службы Windows:** vmicvss  
**Имя управляющей программы Linux:** hv_vss_daemon  
**Описание.** Позволяет службе теневого копирования томов выполнять резервное копирование приложений и данных на виртуальной машине.  
**Добавлено в:** Windows Server 2012, Windows 8  
**Влияние.** При отключении невозможно выполнить резервное копирование виртуальной машины во время выполнения (с помощью VSS).  

Служба запросов на теневое копирование томов необходима для службы теневого копирования томов ([VSS](https://msdn.microsoft.com/en-us/library/aa384589.aspx)).  Служба теневого копирования томов (VSS) захватывает и копирует образы для резервного копирования в работающих системах, в частности на серверах, без существенного снижения производительности и с сохранением стабильности работы служб, предоставляемых этими системами.  Для этого служба интеграции координирует рабочие нагрузки виртуальной машины с процессом резервного копирования узла.

Дополнительные сведения о теневом копировании томов см. [здесь](https://msdn.microsoft.com/en-us/library/dd405549.aspx).


## Интерфейс гостевой службы Hyper-V

**Имя службы Windows:** vmicguestinterface  
**Имя управляющей программы Linux:** hv_fcopy_daemon  
**Описание.** Предоставляет интерфейс для узла Hyper-V для двунаправленного копирования файлов с виртуальной машины и на виртуальную машину.  
**Добавлено в:** Windows Server 2012 R2, Windows 8.1  
**Влияние.** При отключении узел не может копировать файлы в гостевую ОС и из нее с помощью `Copy-VMFile`.  Ознакомьтесь с дополнительными сведениями о [командлете Copy-VMFile](https://technet.microsoft.com/library/dn464282.aspx).  

**Примечания.**  
По умолчанию отключено.  См. раздел [PowerShell Direct с использованием Copy-Item](../user_guide/vmsession.md#copy-files-with-new-pssession-and-copy-item). 


## Служба PowerShell Direct для Hyper-V

**Имя службы Windows:** vmicvmsession  
**Имя управляющей программы Linux:** отсутствует  
**Описание.** Предоставляет механизм для управления виртуальной машиной с помощью PowerShell, используя сеанс виртуальной машины без виртуальной сети.    
**Добавлено в:** Windows Server TP3, Windows 10  
**Влияние.** При отключении этой службы узел не сможет подключиться к виртуальной машине с помощью PowerShell Direct.  

**Примечания.**  
Изначально эта служба называлась службой сеансов виртуальных машин Hyper-V.  
PowerShell Direct находится в активной разработке и доступен только для узлов и гостевых ОС с Windows 10 и Windows Server Technical Preview 3 или более поздней версией.  


С помощью PowerShell Direct можно управлять виртуальной машиной средствами PowerShell с узла Hyper-V независимо от конфигурации сети и параметров удаленного управления на узле Hyper-V или виртуальной машине. Это позволяет администраторам Hyper-V автоматизировать управление и настройку с помощью сценариев.

[Ознакомьтесь с дополнительными сведениями о PowerShell Direct](../user_guide/vmsession.md).  

**Руководства пользователя:**  
* [Выполнение сценария на виртуальной машине](../user_guide/vmsession.md#run-a-script-or-command-with-invoke-command)
* [Копирование файлов на виртуальную машину и с виртуальной машины](../user_guide/vmsession.md#copy-files-with-new-pssession-and-copy-item)


## Дополнительные ресурсы

**Руководства пользователя:**  
* [Включение и отключение служб интеграции на узле Hyper-V](../user_guide/managing_ics.md#enable-or-disable-integration-services-using-powershell)
* Включение и отключение служб интеграции на виртуальной машине
** [Windows](../user_guide/managing_ics.md#manage-integration-services-from-guest-os-windows)
** [Linux](../user_guide/managing_ics.md#manage-integration-services-from-guest-os-linux)
* [Обновление и обслуживание службы интеграции](../user_guide/managing_ics.md#integration-service-maintenance)


<!--HONumber=Jul16_HO1-->


