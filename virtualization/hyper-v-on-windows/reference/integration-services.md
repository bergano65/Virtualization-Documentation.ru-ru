---
title: Службы интеграции Hyper-V
description: Справочник по службам интеграции Hyper-V
keywords: windows10, hyper-v, службы интеграции, компоненты интеграции
author: scooley
ms.date: 05/25/2016
ms.topic: article
ms.prod: windows-10-hyperv
ms.service: windows-10-hyperv
ms.assetid: 18930864-476a-40db-aa21-b03dfb4fda98
ms.openlocfilehash: 84974f093cc80f8a216518bab051e13397e89b6e
ms.sourcegitcommit: 0deb653de8a14b32a1cfe3e1d73e5d3f31bbe83b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2019
ms.locfileid: "9577435"
---
# <a name="hyper-v-integration-services"></a>Службы интеграции Hyper-V

Службы интеграции (часто называемые компонентами интеграции) — это службы, позволяющие виртуальной машине связываться с узлом Hyper-V. Многие из этих служб используются для удобства, а другие могут быть достаточно важны для правильной работы виртуальной машины.

В этой статье приведены справочные сведения по каждой из служб интеграции, доступной в Windows.  Она также является отправной точкой для получения любых сведений, связанных с конкретными службами интеграции и их историей.

**Руководства пользователя:**  
* [управление службами интеграции](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/manage/manage-Hyper-V-integration-services)


## <a name="quick-reference"></a>Краткий справочник

| Имя | Название службы Windows | Имя управляющей программы Linux |  Описание | Влияние на виртуальную машину при отключении |
|:---------|:---------|:---------|:---------|:---------|
| [Служба пульса (Hyper-V)](#hyper-v-heartbeat-service) |  vmicheartbeat | hv_utils | Сообщает, что виртуальная машина работает нормально. | Различается |
| [Служба завершения работы в качестве гостя (Hyper-V)](#hyper-v-guest-shutdown-service) | vmicshutdown | hv_utils |  Позволяет узлу управлять выключением виртуальных машин. | **высоко-** |
| [Служба синхронизации времени Hyper-V](#hyper-v-time-synchronization-service) | vmictimesync | hv_utils | Синхронизирует время виртуальной машины со временем на главном компьютере. | **высоко-** |
| [Служба обмена данными Hyper-V (KVP)](#hyper-v-data-exchange-service-kvp) | vmickvpexchange | hv_kvp_daemon | Позволяет виртуальной машине и узлу обмениваться между собой простыми метаданными. | Средняя |
| [Служба запросов на теневое копирование томов Hyper-V](#hyper-v-volume-shadow-copy-requestor) | vmicvss | hv_vss_daemon | Позволяет службе теневого копирования томов выполнить резервное копирование виртуальной машины без ее выключения. | Различается |
| [Интерфейс гостевой службы Hyper-V](#hyper-v-powershell-direct-service) | vmicguestinterface | hv_fcopy_daemon | Предоставляет интерфейс для узла Hyper-V для копирования файлов с виртуальной машины и на виртуальную машину. | Низкий |
| [Служба PowerShell Direct для Hyper-V](#hyper-v-powershell-direct-service) | vmicvmsession | недоступен | Позволяет управлять виртуальной машиной с помощью PowerShell без подключения к сети. | Низкий |  


## <a name="hyper-v-heartbeat-service"></a>Служба пульса (Hyper-V)

**Имя службы Windows:** vmicheartbeat  
**Имя управляющей программы Linux:** hv_utils  
**Описание.** Сообщает узлу Hyper-V, что на виртуальной машине установлена операционная система и что она загрузилась надлежащим образом.  
**Добавлено в:** Windows Server2012, Windows8  
**Влияние.** При отключении виртуальная машина не может сообщать о корректной работе своей операционной системы.  Это может повлиять на некоторые виды мониторинга и диагностики на стороне узла.  

Служба пульсов позволяет ответить на простые вопросы, например: "Загрузилась ли виртуальная машина?".  

Когда Hyper-V сообщает, что состояние виртуальной машины— "Запущена" (см. пример ниже), это означает, что Hyper-V выделил ресурсы для виртуальной машины, и это не означает, что на виртуальной машине установлена или нормально работает операционная система.  Здесь оказывается полезной служба пульсов.  Служба пульсов сообщает Hyper-V о том, что операционная система на виртуальной машине загрузилась.  

### <a name="check-heartbeat-with-powershell"></a>Проверка пульсов с помощью PowerShell

Запустите [Get-VM](https://technet.microsoft.com/en-us/library/hh848479.aspx) от имени администратора, чтобы увидеть пульсы от виртуальной машины:
``` PowerShell
Get-VM -VMName $VMName | select Name, State, Status
```

Выходные данные должны иметь следующий вид:
```
Name    State    Status
----    -----    ------
DemoVM  Running  Operating normally
```

Поле `Status` определяется службой пульсов.



## <a name="hyper-v-guest-shutdown-service"></a>Служба завершения работы в качестве гостя (Hyper-V)

**Имя службы Windows:** vmicshutdown  
**Имя управляющей программы Linux:** hv_utils  
**Описание.** Позволяет узлу Hyper-V запрашивать завершение работы виртуальной машины.  Компьютер виртуальной машины всегда может принудительно выключить виртуальную машину, но это похоже на нажатие кнопки выключения в отличие от корректного завершения работы.  
**Добавлено в:** Windows Server2012, Windows8  
**Влияние:** **высокая степень влияния**. При отключении узел не сможет корректно завершить работу виртуальной машины.  Будет жесткого выключения питания, которая может привести к потере данных или данные повреждению.  


## <a name="hyper-v-time-synchronization-service"></a>Служба синхронизации времени Hyper-V

**Имя службы Windows:** vmictimesync  
**Имя управляющей программы Linux:** hv_utils  
**Описание:** Синхронизирует системное время виртуальной машины с системным временем физического компьютера.  
**Добавлено в:** Windows Server2012, Windows8  
**Влияние:** **высокая степень влияния**. При отключении время на виртуальной машине будет случайным образом отклоняться от времени компьютера.  


## <a name="hyper-v-data-exchange-service-kvp"></a>Служба обмена данными Hyper-V (KVP)

**Имя службы Windows:** vmickvpexchange  
**Имя управляющей программы Linux:** hv_kvp_daemon  
**Описание.** Предоставляет механизм для обмена простыми метаданными между виртуальной машиной и узлом.  
**Добавлено в:** Windows Server2012, Windows8  
**Влияние**. При отключении виртуальные машины с системой Windows8, Windows Server2012 или более ранней версией не будут получать обновления для служб интеграции Hyper-V.  Отключение обмена данными также может повлиять на некоторые виды мониторинга и диагностики на стороне узла.  

Служба обмена данными (иногда называемая KVP) предоставляет небольшой объем данных о виртуальной машине узлу Hyper-V (и наоборот) с помощью пар "ключ-значение" (KVP) в реестре Windows.  Тот же механизм может также применяться для совместного использования настроенных данных виртуальной машиной и узлом.

Пары "ключ-значение" состоят из ключа и значения. И ключ, и значение являются строками, другие типы данных не поддерживаются. При создании или изменении пары "ключ-значение" она доступна как в гостевой ОС, так и на узле. Данные из пары "ключ-значение" передаются через шину VMbus Hyper-V и не требуют никакого сетевого подключения между гостевой ОС и узлом Hyper-V. 

Служба обмена данными— это мощный инструмент для сохранения данных о виртуальной машине; для совместного использования интерактивных данных или передачи данных используйте [PowerShell Direct](#hyper-v-powershell-direct-service). 


**Руководства пользователя:**  
* [Data Exchange: Using key-value pairs to share information between the host and guest on Hyper-V](https://technet.microsoft.com/en-us/library/dn798287.aspx) (Использование пар "ключ-значение" для совместного использования информации на узле и в гостевой ОС Hyper-V).  


## <a name="hyper-v-volume-shadow-copy-requestor"></a>Служба запросов на теневое копирование томов Hyper-V

**Имя службы Windows:** vmicvss  
**Имя управляющей программы Linux:** hv_vss_daemon  
**Описание.** Позволяет службе теневого копирования томов выполнять резервное копирование приложений и данных на виртуальной машине.  
**Добавлено в:** Windows Server2012, Windows8  
**Влияние.** При отключении невозможно выполнить резервное копирование виртуальной машины во время выполнения (с помощью VSS).  

Служба запросов на теневое копирование томов необходима для службы теневого копирования томов ([VSS](https://msdn.microsoft.com/en-us/library/aa384589.aspx)).  Служба теневого копирования томов (VSS) захватывает и копирует образы для резервного копирования в работающих системах, в частности на серверах, без существенного снижения производительности и с сохранением стабильности работы служб, предоставляемых этими системами.  Для этого служба интеграции координирует рабочие нагрузки виртуальной машины с процессом резервного копирования узла.

Дополнительные сведения о теневом копировании томов см. [здесь](https://msdn.microsoft.com/en-us/library/dd405549.aspx).


## <a name="hyper-v-guest-service-interface"></a>Интерфейс гостевой службы Hyper-V

**Имя службы Windows:** vmicguestinterface  
**Имя управляющей программы Linux:** hv_fcopy_daemon  
**Описание.** Предоставляет интерфейс для узла Hyper-V для двунаправленного копирования файлов с виртуальной машины и на виртуальную машину.  
**Добавлено в:** Windows Server2012R2, Windows8.1  
**Влияние.** При отключении узел не может копировать файлы в гостевую ОС и из нее с помощью `Copy-VMFile`.  Ознакомьтесь с дополнительными сведениями о [командлете Copy-VMFile](https://technet.microsoft.com/library/dn464282.aspx).  

**Примечания.**  
По умолчанию отключено.  См. раздел [PowerShell Direct с использованием Copy-Item](../user-guide/powershell-direct.md#copy-files-with-new-pssession-and-copy-item). 


## <a name="hyper-v-powershell-direct-service"></a>Служба PowerShell Direct для Hyper-V

**Имя службы Windows:** vmicvmsession  
**Имя управляющей программы Linux:** отсутствует  
**Описание.** Предоставляет механизм для управления виртуальной машиной с помощью PowerShell, используя сеанс виртуальной машины без виртуальной сети.    
**Добавлено в:** Windows ServerTP3, Windows10  
**Влияние.** При отключении этой службы узел не сможет подключиться к виртуальной машине с помощью PowerShell Direct.  

**Примечания.**  
Изначально эта служба называлась службой сеансов виртуальных машин Hyper-V.  
PowerShell Direct находится в активной разработке и доступен только для узлов и гостевых ОС с Windows10 и Windows Server Technical Preview3 или более поздней версией.

С помощью PowerShell Direct можно управлять виртуальной машиной средствами PowerShell с узла Hyper-V независимо от конфигурации сети и параметров удаленного управления на узле Hyper-V или виртуальной машине. Это позволяет администраторам Hyper-V автоматизировать управление и настройку с помощью сценариев.

[Ознакомьтесь с дополнительными сведениями о PowerShell Direct](../user-guide/powershell-direct.md).  

**Руководства пользователя:**  
* [Выполнение сценария на виртуальной машине](../user-guide/powershell-direct.md#run-a-script-or-command-with-invoke-command)
* [Копирование файлов на виртуальную машину и с виртуальной машины](../user-guide/powershell-direct.md#copy-files-with-new-pssession-and-copy-item)
