---
title: Создание виртуальной машины с помощью Hyper-V
description: Создание виртуальной машины с помощью Hyper-V в Windows10
keywords: windows10, hyper-v
author: scooley
ms.date: 05/02/2016
ms.topic: article
ms.prod: windows-10-hyperv
ms.assetid: 66723f33-b12c-49d1-82cf-71ba9d6087e9
ms.openlocfilehash: 94ac197f5bc660e52d215fa132eae78f521e1c30
ms.sourcegitcommit: c4a3f88d1663dd19336bfd4ede0368cb18550ac7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2019
ms.locfileid: "9882897"
---
# <a name="create-virtual-machine-with-hyper-v-on-windows-10"></a>Создание виртуальной машины с помощью Hyper-V в Windows10

Создание виртуальной машины и установка на нее операционной системы.  Вам потребуется ISO-файл для операционной системы, которую требуется запустить. При необходимости пробную версию ОС Windows10 можно получить в [Центре оценки TechNet](http://www.microsoft.com/evalcenter/).

## <a name="create-a-virtual-machine-with-hyper-v-manager"></a>Создание виртуальной машины с помощью диспетчера Hyper-V

1. Откройте диспетчер Hyper-V, нажав клавишу Windows и введя в строке поиска "диспетчер Hyper-V", выполните поиск **диспетчера Hyper-V** в своих приложениях.

1. В диспетчере Hyper-V щелкните **Действие** > **Создать** > **Виртуальная машина**, чтобы открыть мастер создания виртуальной машины.

1. Просмотрите содержимое страницы "Приступая к работе" и нажмите кнопку **Далее**.

1. Присвойте имя виртуальной машине.
  > **Примечание.** Это имя, используемое Hyper-V для виртуальной машины, а не имя компьютера, присвоенное гостевой операционной системе, которая будет развернута внутри виртуальной машины.

1. Выберите расположение, где будут храниться файлы виртуальной машины (например, **c:\virtualmachine**). Можно также оставить расположение по умолчанию. По завершении нажмите кнопку **Далее**.

  ![](media/new_vm_upd.png)

1. Выберите поколение виртуальной машины и нажмите кнопку **Далее**.  

  В виртуальных машинах поколения 2, которые появились в Windows Server 2012 R2, доступна упрощенная модель виртуального оборудования и некоторые дополнительные функциональные возможности. На виртуальную машину поколения 2 можно установить только 64-разрядную версию операционной системы. Дополнительные сведения о виртуальных машинах поколения 2 см. в статье [Generation 2 Virtual Machine Overview](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn282285(v=ws.11)>) (Обзор виртуальных машин поколения 2).
  
  > Если новая виртуальная машина относится к поколению 2 и будет работать под управлением дистрибутива Linux, потребуется отключить безопасную загрузку. Дополнительные сведения о безопасной загрузке см. в статье [Безопасная загрузка](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-8.1-and-8/dn486875(v=ws.11)>).

2. Выберите **2048**МБ в качестве значения параметра **Память, выделяемая при запуске** и не снимайте флажок **Использовать динамическую память**. Нажмите кнопку **Далее**.

  Память распределяется между узлом Hyper-V и виртуальной машиной, работающей на этом узле. Число виртуальных машин, которые могут работать на одном узле, зависит, в частности, от объема доступной памяти. Виртуальную машину можно также настроить для использования динамической памяти. При включении динамическая память высвобождает неиспользуемую память работающей виртуальной машины. Это позволяет большему количеству виртуальных машин работать на узле. Дополнительные сведения о динамической памяти см. в статье [Общие сведения о динамической памяти в Hyper-V](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/hh831766(v=ws.11)).

3. В мастере настройки сети выберите для данной виртуальной машины виртуальный коммутатор и нажмите кнопку **Далее**. Дополнительные сведения см. в статье [Создание виртуального коммутатора](connect-to-network.md).

4. Присвойте имя виртуальному жесткому диску, выберите расположение или оставьте значение по умолчанию, а затем укажите размер. По окончании нажмите кнопку **Далее**.

  Виртуальный жесткий диск представляет собой память для виртуальной машины, чем напоминает физический жесткий диск. Виртуальный жесткий диск требуется для установки операционной системы на виртуальной машине.
  
  ![](media/new_vhd_upd.png)

1. В мастере параметров установки выберите элемент **Установить операционную систему из файла загрузочного образа**, а затем выберите ISO-файл нужной операционной системы. Нажмите кнопку **Далее** после завершения.

  При создании виртуальной машины можно настроить некоторые параметры установки операционной системы. Доступны три варианта.

  * **Установить операционную систему позднее**. Этот параметр не вносит какие-либо дополнительные изменения в виртуальную машину.

  * **Установить операционную систему из файла загрузочного образа**. Действие этого параметра аналогично вставке компакт-диска в физический дисковод компьютера. Чтобы настроить этот параметр, выберите ISO-образ. Этот образ будет подключен к дисководу виртуальной машины. Меняется порядок загрузки виртуальной машины: загрузка начинается с дисковода.

  * **Установить операционную систему с сетевого сервера установки**. Этот параметр доступен только тогда, когда виртуальная машина подключена к сетевому коммутатору. В этой конфигурации виртуальная машина предпринимает попытки загрузиться из сети.

1. Просмотрите информацию о данной виртуальной машине и нажмите кнопку **Готово** для завершения создания виртуальной машины.

## <a name="create-a-virtual-machine-with-powershell"></a>Создание виртуальной машины с помощью PowerShell

1. Откройте интегрированную среду сценариев PowerShell от имени администратора.

2. Выполните следующий скрипт.

  ``` powershell
  # Set VM Name, Switch Name, and Installation Media Path.
  $VMName = 'TESTVM'
  $Switch = 'External VM Switch'
  $InstallMedia = 'C:\Users\Administrator\Desktop\en_windows_10_enterprise_x64_dvd_6851151.iso'

  # Create New Virtual Machine
  New-VM -Name $VMName -MemoryStartupBytes 2147483648 -Generation 2 -NewVHDPath "D:\Virtual Machines\$VMName\$VMName.vhdx" -NewVHDSizeBytes 53687091200 -Path "D:\Virtual Machines\$VMName" -SwitchName $Switch

  # Add DVD Drive to Virtual Machine
  Add-VMScsiController -VMName $VMName
  Add-VMDvdDrive -VMName $VMName -ControllerNumber 1 -ControllerLocation 0 -Path $InstallMedia

  # Mount Installation Media
  $DVDDrive = Get-VMDvdDrive -VMName $VMName

  # Configure Virtual Machine to Boot from DVD
  Set-VMFirmware -VMName $VMName -FirstBootDevice $DVDDrive
  ```

## <a name="complete-the-operating-system-deployment"></a>Завершение развертывания операционной системы

Чтобы завершить создание виртуальной машины, необходимо ее запустить и выполнить пошаговые инструкции по установке операционной системы.

1. В диспетчере Hyper-V дважды щелкните виртуальную машину. Запустится средство VMConnect.

2. В VMConnect нажмите зеленую кнопку "Пуск". Это аналогично нажатию кнопки питания на физическом компьютере. Нажмите любую клавишу для загрузки с компакт- или DVD-диска при появлении соответствующего запроса.

  > **Примечание.** Чтобы убедиться, что нажатия клавиш отправляются в виртуальную машину, щелкните внутри окна VMConnect.

3. Виртуальная машина загрузится для установки, и можно будет выполнить пошаговую установку аналогично процедуре на физическом компьютере.

  ![](media/OSDeploy_upd.png) 

  > **Примечание.** Если вы не используете корпоративную лицензию на Windows, требуется отдельная лицензия для Windows, установленная в виртуальной машине. Операционная система виртуальной машины не зависит от операционной системы узла.
