---
title: Совместное использование устройств с помощью виртуальных машин Windows
description: В этой статье представлены пошаговые инструкции по совместному использованию устройств с помощью виртуальных машин Hyper-V (USB, аудиоустройств, микрофона и подключенных дисков)
keywords: windows 10, hyper-v
ms.author: scooley
ms.date: 10/20/2017
ms.topic: article
ms.prod: windows-10-hyperv
ms.service: windows-10-hyperv
ms.assetid: d1aeb9cb-b18f-43cb-a568-46b33346a188
ms.openlocfilehash: 52d51fca03f454a311a123f20e5aeda9376fdc3d
ms.sourcegitcommit: 1ca9d7562a877c47f227f1a8e6583cb024909749
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2019
ms.locfileid: "74911074"
---
# <a name="share-devices-with-your-virtual-machine"></a>Совместное использование устройств на виртуальной машине

> Доступно только для виртуальных машин Windows.

Режим расширенного сеанса позволяет подключать Hyper-V к виртуальным машин с помощью протокола удаленного рабочего стола (RDP).  Это не только это повышает удобство работы с виртуальной машины, подключая ее с помощью протокола RDP, но и позволяет виртуальной машине использовать устройства совместно с компьютером.  Так как RDP включен по умолчанию в Windows 10, вы, вероятно, уже используете этот протокол для подключения виртуальных машин Windows.  В данной статье описываются некоторые из преимуществ и скрытые параметры диалогового окна настройки подключения.

RDP и режим расширенного сеанса предоставляют следующие возможности.

* Изменение размера виртуальных машин и поддержка высокого разрешения
* Улучшенная интеграция виртуальных машин
  * Общий буфер обмена
  * Общий доступ к файлам с помощью перетаскивания, копирования и вставки
* Общий доступ к устройствам
  * Микрофоны и динамики
  * USB-устройства
  * Диски с данными (включая C:)
  * Принтеры

В этой статье показано, как узнать тип сеанса, перейти в режим расширенного сеанса и настроить параметры сеанса.

## <a name="share-drives-and-devices"></a>Общий доступ к дискам и устройствам

Возможности общего доступа в расширенном режиме сеанса скрыты в этом неприметном окне подключения, которое открывается при подключении к виртуальной машине:

![](media/esm-default-view.png)

По умолчанию виртуальные машины с включенным режимом расширенного сеанса будут совместно использовать буфер обмена и принтеры.  Они по умолчанию передают звук виртуальной машины на динамики компьютера.

Чтобы включить совместное использование устройств на виртуальной машине или изменить параметры по умолчанию, выполните следующие действия.

1. Откройте дополнительные параметры

  ![](media/esm-show-options.png)

1. Просмотрите локальные ресурсы

  ![](media/esm-local-resources.png)

### <a name="share-storage-and-usb-devices"></a>Общий доступ к хранилищу и USB-устройствам

По умолчанию виртуальные машины в режиме расширенного сеанса совместно используют принтеры, буфер обмена, смарт-карты и другие устройства безопасности, чтобы вы могли применять более безопасные средства входа в систему на виртуальной машине.

Для совместного использования других устройств, таких как USB-устройства или диска C:, выберите меню "Дополнительно...":  
![](media/esm-more-devices.png)

Здесь можно выбрать устройства, которые будут совместно использоваться с виртуальной машиной.  Особенно полезным будет общий системный диск (Windows C:).  
![](media/esm-drives-usb.png)

### <a name="share-audio-devices-speakers-and-microphones"></a>Совместное использование звуковых устройств (динамиков и микрофона)

По умолчанию виртуальные машины в режиме расширенного сеанса передают звук на динамики компьютера.  Виртуальная машина также использует звуковое устройство, выбранное на хост-компьютере.

Чтобы изменить эти параметры или включить сквозную передачу микрофона (для записи звука на виртуальной машине), выполните следующие действия.

Откройте меню "Параметры..." для настройки параметров удаленного звука  
![](media/esm-audio.png)

Теперь настройте параметры звука и микрофона  
![](media/esm-audio-settings.png)

Поскольку виртуальная машина, скорее всего, выполняется локально, параметры "Воспроизвести на этом компьютере" и "Воспроизвести на удаленном компьютере" дают одни и те же результаты.

## <a name="re-launching-the-connection-settings"></a>Повторный запуск параметров подключения

Если диалоговое окно разрешений и общего доступа к устройствам не открывается, попробуйте запустить VMConnect независимо в меню Windows или из командной строки от имени администратора.  

``` Powershell
vmconnect.exe
```

## <a name="check-session-type"></a>Проверка типа сеанса

Вы можете узнать текущий тип подключения , используя значок режима расширенного сеанса в верхней части средства подключения к виртуальной машине (VMConnect).  Эта кнопка также позволяет переключаться между базовым сеансом и режимом расширенного сеанса.

![](media/esm-button-location.png)

| Значок | Состояние подключения |
|:-----|:---------|
|![](media/esm-basic.png)| В настоящее время используется режим расширенного сеанса.  Щелкните этот значок, чтобы повторно подключиться к виртуальной машине в базовом режиме. |
|![](media/esm-connect.png)| В настоящее время используется базовый режим сеанса, при этом доступен режим расширенного сеанса.  Щелкните этот значок, чтобы повторно подключиться к виртуальной машине в режиме расширенного сеанса.  |
|![](media/esm-stop.png)| В настоящее время используется базовый режим.  Режим расширенного сеанса недоступен для этой виртуальной машины. |