---
title: "Устранение неполадок Kubernetes"
author: gkudra-msft
ms.author: gekudray
ms.date: 11/16/2017
ms.topic: troubleshooting
ms.prod: containers
description: "Решения распространенных проблем при развертывании Kubernetes и присоединении узлов Windows."
keywords: "kubernetes, 1.9, linux, компиляция"
ms.openlocfilehash: b6be43f1afabdf8ef9c2ddc6f46ed5ac43a9e7a5
ms.sourcegitcommit: 2e8f1fd06d46562e56c9e6d70e50745b8b234372
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2018
---
# <a name="troubleshooting-kubernetes"></a>Устранение неполадок Kubernetes #
На этой странице описано несколько распространенных проблем, связанных с установкой, сетями и развертываниями Kubernetes.

> [!tip]
> Предложите свой вопрос, создав заявку в [нашем репозитории документации](https://github.com/MicrosoftDocs/Virtualization-Documentation/).


## <a name="common-deployment-errors"></a>Распространенные ошибки при развертывании ##
Отладка главного узла Kubernetes делятся на три основных категории (в порядке вероятности):

  - что-то не так с системой контейнеров Kubernetes;
  - что-то не так с выполнением `kubelet`;
  - что-то не так с системой.


Выполните `kubectl get pods -n kube-system` для просмотра модулей pod, созданных Kubernetes. Это может дать определенные сведения о том, в каких из них возникли сбои или какие модули не запускаются. Затем выполните `docker ps -a`, чтобы просмотреть все необработанные контейнеры, поддерживающие эти модули. Наконец, выполните `docker logs [ID]` для контейнеров, которые могут быть причиной проблемы, чтобы просмотреть необработанные выходные данные процессов.


### <a name="permission-denied-errors"></a>Ошибки _«Отказано в разрешениях»_ ###
Убедитесь, что у сценариев есть разрешения на выполнение:

```bash
chmod +x [script name]
```

Кроме того, некоторые сценарии необходимо запускать с правами суперпользователя (например, `kubelet`) и с префиксом `sudo`.


### <a name="cannot-connect-to-the-api-server-at-httpsaddressport"></a>Не удается подключиться к API-серверу по адресу `https://[address]:[port]` ###
Чаще эта ошибка указывает на проблемы с сертификатом. Убедитесь, что файл конфигурации создан корректно, что IP-адреса в нем соответствуют адресу узла и что вы скопировали его в каталог, подключенный API-сервером.

Если вы следовали [нашим инструкциям](./creating-a-linux-master), результатом будет `~/kube/kubelet/`; в противном случае см. файл манифеста API-сервера для проверки точек подключения.


## <a name="common-networking-errors"></a>Распространенные сетевые ошибки ##
Могут существовать дополнительные ограничения в сети или на узлах, предотвращающие определенные виды взаимодействия между узлами. Убедитесь, что:

  - вы правильно настроили топологию сети;
  - трафик, поступающий от модулей pod, разрешен;
  - HTTP-трафик разрешен, если вы развертываете веб-службы;
  - ICMP-пакеты не удаляются.


<!-- ### My Linux node cannot ping my Windows pods ### -->

## <a name="common-windows-errors"></a>Распространенные ошибки Windows ##

### <a name="pods-stop-resolving-dns-queries-successfully-after-some-time-alive"></a>Модули pod через некоторое время перестают успешно сопоставлять запросы DNS ###
Это известная проблема сетевого стека, которая влияет на некоторые конфигурации. Сейчас мы ищем способы ее устранения.


### <a name="my-kubernetes-pods-are-stuck-at-containercreating"></a>Мои модули Kubernetes остаются в состоянии "ContainerCreating" ###
Эта проблема может быть вызвана множеством причин, однако самая распространенная из них— неправильная настройка образа "Пауза". Это высокоуровневый признак следующей проблемы.


### <a name="when-deploying-docker-containers-keep-restarting"></a>При развертывании контейнеры Docker продолжают перезапускаться ###
Убедитесь, что образ "Пауза" совместим с вашей версией ОС. В [инструкциях](./getting-started-kubernetes-windows.md) предполагается, что используется версия 1709 ОС и контейнеров. Если у вас установлена более поздняя версия Windows, например сборка для участников программы предварительной оценки, необходимо настроить образы. Сведения об образах см. в [репозитории Docker](https://hub.docker.com/u/microsoft/) корпорации Майкрософт. Независимо от этого, файл Dockerfile образа "Пауза" и образец службы будут ожидать, что образ помечен как `microsoft/windowsservercore:latest`.


### <a name="my-windows-pods-cannot-access-the-linux-master-or-vice-versa"></a>Модули pod в Windows не имеют доступа к главному узлу Linux или наоборот ###
Если вы используете виртуальную машину Hyper-V, убедитесь, что подмена MAC-адресов включена в сетевых адаптерах.


### <a name="my-windows-node-cannot-access-my-services-using-the-service-ip"></a>Узел Windows не может получить доступ к службам с помощью IP-адреса служб ###
Это известное ограничение текущего сетевого стека для Windows. Только модули pod могут ссылаться на IP-адрес службы.


### <a name="no-network-adapter-is-found-when-starting-kubelet"></a>При запуске Kubelet не удается найти ни один сетевой адаптер ###
Сетевому стеку Windows требуется виртуальный адаптер, чтобы сеть Kubernetes работала. Если следующие команды не дают результатов (в оболочке администратора), создание виртуальной сети&mdash; необходимое условие для работы Kubelet &mdash; завершилось ошибкой:

```powershell
Get-HnsNetwork | ? Name -ieq "l2bridge"
Get-NetAdapter | ? Name -Like "vEthernet (Ethernet*"
```

Изучите выходные данные сценария `start-kubelet.ps1`, чтобы узнать, возникли ли ошибки во время создания виртуальной сети.

