---
title: Контейнеры Linux в Windows
description: Узнайте о различных способах использования Hyper-V для работы с контейнерами Linux в Windows так, как если бы они были собственными.
keywords: ЛКОВ, контейнеры Linux, стыковочные устройства, контейнеры
author: scooley
ms.date: 09/17/2019
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.assetid: edfd11c8-ee99-42d8-9878-efc126fe1826
ms.openlocfilehash: 14445f3e9d292dbdab28986e772d0c045fca1586
ms.sourcegitcommit: 9100d2218c160bbe9fbf24f3524c8ff5e3dd826c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2019
ms.locfileid: "10135327"
---
# <a name="linux-containers-on-windows"></a>Контейнеры Linux в Windows

Контейнеры Linux образуют огромный процент от общей экосистемы контейнеров и являются фундаментальными для разработчиков и рабочих сред.  Так как контейнеры совместно работают с узлом контейнера, но работа с контейнерами Linux непосредственно в Windows не является[*](linux-containers.md#other-options-we-considered)возможностью.  Именно здесь виртуализация поступает в изображение.

Теперь вы можете запускать контейнеры Linux с помощью стыковочного узла для Windows и Hyper-V двумя способами:

- Работа с контейнерами Linux на полной виртуальной машине Linux — именно этот стыковочный план обычно находится сегодня.
- Работа с контейнерами Linux с [изоляцией Hyper-V](../manage-containers/hyperv-container.md) (лков) — это новый параметр в Dock для Windows.

В этой статье объясняется, как работает каждый из подходов, содержатся рекомендации по выбору решения, а также о том, как выполняются общие ресурсы.

## <a name="linux-containers-in-a-moby-vm"></a>Контейнеры Linux в виртуальной машине Моби

Чтобы запустить контейнеры Linux на виртуальной машине Linux, следуйте инструкциям в [руководстве по началу работы с док-](https://docs.docker.com/docker-for-windows/)страницей.

Док-станция заблокировала доступ к контейнерам Linux на рабочем столе Windows, так как она впервые была выпущена в 2016 (до тех пор, пока не будут доступны контейнеры для изоляции Hyper-V или Linux в Windows) с помощью виртуальной машины на базе [линукскит](https://github.com/linuxkit/linuxkit) , работающей на Hyper

В этой модели клиент DOCKER запускается на рабочем столе Windows, но вызывает демон Dock на виртуальной машине Linux.

![Моби VM в качестве узла контейнера](media/MobyVM.png)

В этой модели все контейнеры Linux совместно содержат один узел контейнера на основе Linux и все контейнеры Linux.

* Разделите ядро друг с другом и VM Моби, но не с узлом Windows.
* Имеют одинаковое сетевое хранение и сетевые свойства с контейнерами Linux, работающими в Linux (так как они запущены на виртуальной машине Linux).

Кроме того, это означает, что для узла контейнера Linux (Моби VM) должна выполняться демон Dock и все зависимости демона Dock.

Чтобы узнать, работает ли вы с виртуальной машиной Моби, проверьте диспетчер Hyper-V для Моби VM с помощью пользовательского интерфейса диспетчера Hyper-V или запуска `Get-VM` в окне PowerShell с повышенными привилегиями.

## <a name="linux-containers-with-hyper-v-isolation"></a>Контейнеры Linux с изоляцией Hyper-V

Чтобы воспользоваться контейнерами Linux в Windows (ЛКОВ), следуйте инструкциям по использованию контейнеров Linux в [контейнерах Linux в Windows 10](../quick-start/quick-start-windows-10-linux.md).

Контейнеры Linux с поддержкой технологии Hyper-V выполняют каждый контейнер Linux на оптимизированной виртуальной машине Linux с достаточной ОС для выполнения контейнеров. В отличие от подхода Моби VM, каждый контейнер Linux имеет собственную ядро и собственную изолированную среду ВМ. Они также управляются закреплением непосредственно в Windows.

![Контейнеры Linux с изоляцией Hyper-V (ЛКОВ)](media/lcow-approach.png)

Подробное рассмотрение того, как Управление контейнерами отличается от подхода к виртуальной машине Моби и ЛКОВ, в управлении контейнером модели ЛКОВ остается в Windows, и каждое ЛКОВ управление происходит через ГРПК и в контейнере.  Это означает, что дистро контейнеры Linux, использующиеся для ЛКОВ, могут иметь гораздо меньший запас.  Сейчас мы используем Линукскит для оптимизированных контейнеров дистро, но в других проектах, таких как Ката, вы также можете создать аналогичные высококачественные Linux дистрос (Clear Linux).

Подробное рассмотрение каждого ЛКОВ:

![Архитектура ЛКОВ](media/lcow.png)

Чтобы узнать, что вы используете ЛКОВ, перейдите на `C:\Program Files\Linux Containers`. Если Dock настроен на использование ЛКОВ, здесь будет несколько файлов с минимальными Линукскит дистро, которые выполняются в каждом контейнере, работающем в режиме изоляции Hyper-V.  Обратите внимание на то, что оптимизированные компоненты виртуальной машины менее 100 МБ, но гораздо меньше, чем изображение Линукскит в Моби VM.

### <a name="work-in-progress"></a>Проблемы и их решение

ЛКОВ находится в активном состоянии разработки. Отслеживание хода выполнения в проекте Моби на [GitHub](https://github.com/moby/moby/issues/33850)

#### <a name="bind-mounts"></a>Привязки подключений

Тома с привязкой подключения с использованием `docker run -v ...` хранят файлы в файловой системе Windows NTFS, поэтому для операций POSIX потребуется определенная корректировка. Некоторые операции файловой системы в настоящий момент реализованы частично или не реализованы, что может вызывать проблемы с совместимостью для некоторых приложений.

Эти операции в настоящий момент не работают для томов с привязкой подключения:

* MkNod
* XAttrWalk
* XAttrCreate
* Lock
* Getlock
* Auth
* Flush
* INotify

Ряд операций не были полностью реализованы:

* GetAttr— число Nlink всегда равно 2.
* Open— реализованы только флаги ReadWrite, WriteOnly и ReadOnly.

Эти приложения требуют сопоставления томов и не запускаются или выполняются неправильно.

* MySQL
* PostgreSQL
* WordPress
* Jenkins
* MariaDB
* RabbitMQ

### <a name="extra-information"></a>Дополнительные сведения

[Блог для закрепления, описывающий ЛКОВ](https://blog.docker.com/2017/11/docker-for-windows-17-11/)

[Видео контейнера Linux](https://sec.ch9.ms/ch9/1e5a/08ff93f2-987e-4f8d-8036-2570dcac1e5a/LinuxContainer.mp4)

[Линукскит ЛКОВ (ядро и инструкции по сборке)](https://github.com/linuxkit/lcow)

## <a name="when-to-use-moby-vm-vs-lcow"></a>Когда следует использовать Моби VM и ЛКОВ

### <a name="when-to-use-moby-vm"></a>Когда использовать Моби VM

Сейчас мы рекомендуем использовать метод VM Моби для работы с контейнерами Linux для людей, которые:

- Нужна стабильная среда контейнера.  Это Dock для Windows по умолчанию.
- Запускать контейнеры Windows или Linux, но редко и те, и другие.
- Существуют сложные или пользовательские сетевые требования между контейнерами Linux.
- Не требуется изоляция ядра (изоляция Hyper-V) между контейнерами Linux.

### <a name="when-to-use-lcow"></a>Когда следует использовать ЛКОВ

Прямо сейчас мы рекомендуем ЛКОВ людям, которые:

- Вы хотите протестировать новейшую технологию.
- Одновременное выполнение контейнеров Windows и Linux.
- Требуется изоляция ядра (изоляция Hyper-V) между контейнерами Linux.

## <a name="other-options-we-considered"></a>Другие рассматриваемые параметры

Когда мы рассмотрим способы запуска контейнеров Linux в Windows, мы рассматривали ВСЛ. В конечном итоге мы выбрали подход на основе виртуализации, чтобы контейнеры Linux в Windows были последовательны в использовании контейнеров Linux в Linux. Использование Hyper-V также делает ЛКОВ более безопасным. Мы можем повторно выполнить вычисления в будущем, но в настоящее время ЛКОВ будет продолжать использовать Hyper-V.

Если у вас есть идеи, напишите отзыв с помощью GitHub или UserVoice.  Мы особенно ценим отзывы о конкретных впечатлениях, которые вы хотели бы видеть.
