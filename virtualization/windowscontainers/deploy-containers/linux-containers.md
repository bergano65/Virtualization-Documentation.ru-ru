---
title: Контейнеры Linux в Windows
description: Узнайте о различных способах Hyper-V можно использовать для запуска контейнеров Linux в Windows, как если бы они собственные.
keywords: LCOW, контейнеры linux, docker, контейнеры
author: scooley
ms.date: 11/02/2018
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.assetid: edfd11c8-ee99-42d8-9878-efc126fe1826
ms.openlocfilehash: 8597a93f035f5e451df8176d1563299120c95cb8
ms.sourcegitcommit: 0deb653de8a14b32a1cfe3e1d73e5d3f31bbe83b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2019
ms.locfileid: "9578425"
---
# <a name="linux-containers-on-windows"></a>Контейнеры Linux в Windows

Контейнеры Linux составляют огромное процент от общего экосистема контейнеров и являются обязательными для возможности разработчика и производственной сред.  Так как контейнеры ядро узла контейнера, однако контейнерами Linux непосредственно в Windows не удастся[*](linux-containers.md#other-options-we-considered).  Именно здесь виртуализации вступает в рисунок.

Сейчас существует два способа запуска контейнеров Linux с Docker для Windows и Hyper-v.

1. Запуска контейнеров Linux в полной виртуальных Машин Linux — это Docker обычно предлагаемыми компонентами сегодня.
1. Запуск контейнеров Linux с [изоляцией Hyper-V](../manage-containers/hyperv-container.md) (LCOW) — это новый вариант в Docker для Windows.

В этой статье описываются как каждый подход работает, содержит рекомендации по выбору решение и общих папок проблемы и их решение.

## <a name="linux-containers-in-a-moby-vm"></a>Контейнеры Linux в виртуальной Машины Moby

Для запуска контейнеров Linux в виртуальной Машине Linux, следуйте инструкциям в [руководстве начало работы Docker](https://docs.docker.com/docker-for-windows/).

Docker была возможность запускать контейнеры Linux в Windows рабочего стола, так как она была выпущена в 2016 (до изоляции Hyper-V или LCOW были доступны) с использованием [LinuxKit](https://github.com/linuxkit/linuxkit) на основе виртуальной машиной, работающей в Hyper-V.

В этой модели клиента Docker работает на рабочем столе Windows, но вызовы в управляющей программы Docker на виртуальной Машине Linux.

![Виртуальная машина Moby качестве узла контейнера](media/MobyVM.png)

В этой модели все контейнеры Linux совместно использовать один контейнер на основе Linux основное приложение и все контейнеры Linux:

* Ядро с друг с другом и виртуальной Машины Moby, но не с узлом Windows.
* У согласованное хранилища и сети свойства с контейнерами Linux, запущенных в Linux (так как они выполняются на виртуальной Машине Linux).

Это также означает, что и узел контейнера Linux (виртуальной Машины Moby) работает под управлением управляющей программы Docker и все зависимости управляющей программы Docker.

Чтобы узнать, если вы работаете с виртуальной Машины Moby, проверьте Диспетчер Hyper-V для виртуальной Машины Moby с помощью интерфейса диспетчера Hyper-V или, выполнив `Get-VM` в окне PowerShell с повышенными привилегиями.

## <a name="linux-containers-with-hyper-v-isolation"></a>Контейнеры Linux с изоляцией Hyper-V

Чтобы испробовать LCOW, следуйте инструкциям контейнеров Linux в [этом руководстве начало работы](../quick-start/quick-start-windows-10.md)

Контейнеры Linux с изоляцией Hyper-V запустите каждый контейнер Linux (LCOW) на виртуальной Машине оптимизированного Linux с необходимыми компонентами ОС для запуска контейнеров.  В отличие от виртуальной Машины Moby подход каждый LCOW имеет собственный ядра и собственный песочницы виртуальной Машины.  Они также контролируются с Docker в Windows напрямую.

![Контейнеры Linux с изоляцией Hyper-V (LCOW)](media/lcow-approach.png)

Перевод подробно рассматриваются отличия между виртуальной Машины Moby подход и LCOW Управление контейнерами, в LCOW Управление контейнерами модели остается на Windows и каждый LCOW управления происходит через GRPC и containerd.  Это означает, что использовать контейнеры дистрибутив Linux для LCOW может быть гораздо меньше инвентаризации.  Справа теперь мы используем LinuxKit для оптимизации дистрибутив контейнеры используют, но другие проекты как Kata создаете аналогично точно настроены Linux дистрибутивы (Очистить Linux) также.

Ниже приведен более подробно рассмотрим каждый LCOW.

![Архитектура LCOW](media/lcow.png)

Чтобы узнать, если вы используете LCOW, перейдите к `C:\Program Files\Linux Containers`. Если Docker настроено для использования LCOW, будет несколько файлов, здесь содержащих минимальный дистрибутив LinuxKit, работающей в каждом контейнере, выполняющиеся в рамках изоляции Hyper-V.  Обратите внимание, что менее 100 МБ, намного меньше, чем LinuxKit изображение в виртуальной Машины Moby оптимизированного компоненты виртуальной Машины.

### <a name="work-in-progress"></a>Проблемы и их решение

LCOW находится в активной разработке. Отслеживать текущий ход разработки проекта Moby на [GitHub](https://github.com/moby/moby/issues/33850)

#### <a name="bind-mounts"></a>Привязки подключений

Тома с привязкой подключения с использованием `docker run -v ...` хранят файлы в файловой системе Windows NTFS, поэтому для операций POSIX потребуется определенная корректировка. Некоторые операции файловой системы в настоящий момент реализованы частично или не реализованы, что может вызывать проблемы с совместимостью для некоторых приложений.

Эти операции в настоящий момент не работают для томов с привязкой подключения:

* MkNod
* XAttrWalk
* XAttrCreate
* Lock
* Getlock
* Auth
* Flush
* INotify

Ряд операций не были полностью реализованы:

* GetAttr— число Nlink всегда равно 2.
* Open— реализованы только флаги ReadWrite, WriteOnly и ReadOnly.

Эти приложения все требуется сопоставление томов и будет запустить или работать неправильно.

* MySQL
* PostgreSQL
* WordPress
* Jenkins
* MariaDB
* RabbitMQ

### <a name="extra-information"></a>Дополнительные сведения

[Блог docker, описывающий LCOW](https://blog.docker.com/2017/11/docker-for-windows-17-11/)

[Видео о контейнеров Linux](https://sec.ch9.ms/ch9/1e5a/08ff93f2-987e-4f8d-8036-2570dcac1e5a/LinuxContainer.mp4)

[LinuxKit LCOW-ядра, а также инструкциях сборки](https://github.com/linuxkit/lcow)

## <a name="when-to-use-moby-vm-vs-lcow"></a>Когда следует использовать vs виртуальной Машины Moby LCOW

### <a name="when-to-use-moby-vm"></a>Когда следует использовать виртуальной Машины Moby

Справа теперь мы рекомендуем метод виртуальной Машины Moby контейнерами Linux, чтобы люди, которые:

- Хотите, чтобы среда стабильность контейнера.  Это значение по умолчанию Docker для Windows.
- Запуск контейнеров Windows и Linux, но редко оба одновременно.
- Применяется сложный или пользовательские сетевые требования между контейнерами Linux.
- Нет необходимости изоляцию ядра (изоляции Hyper-V) между контейнерами Linux.

### <a name="when-to-use-lcow"></a>Когда следует использовать LCOW

Справа теперь мы рекомендуем LCOW, чтобы люди, которые:

- Хотите протестировать наши новейшие технологии.
- Запуск контейнеров Windows и Linux в то же время.
- Требуется изоляцию ядра (изоляции Hyper-V) между контейнерами Linux.

## <a name="other-options-we-considered"></a>Другие параметры, которые мы считается

Когда мы смотрит на способы запуска контейнеров Linux в Windows, мы считается WSL. В конечном счете мы выбрали подход на основе виртуализации, чтобы контейнеры Linux в Windows согласованы с контейнерами Linux в Linux. С помощью Hyper-V также позволяет LCOW более безопасным. Мы может повторно оценивать в будущем, но сейчас LCOW будет продолжать использовать Hyper-V.

Если у вас есть идеи, отправьте отзыв через GitHub или UserVoice.  Мы ценим особенно отзыв о определенное взаимодействие, которое вы хотите см. в разделе.
