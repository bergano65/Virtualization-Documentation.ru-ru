---
title: Контейнер Windows в Windows10
description: Краткое руководство по развертыванию контейнеров
keywords: docker, контейнеры
author: taylorb-microsoft
ms.date: 09/26/2016
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.assetid: bb9bfbe0-5bdc-4984-912f-9c93ea67105f
ms.openlocfilehash: d831b5950d84c9f82e2a4874827b2ffb107ad50e
ms.sourcegitcommit: 4090d158dd3573ea90799de5b014c131a206b000
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2018
ms.locfileid: "6121584"
---
# <a name="windows-containers-on-windows-10"></a>Контейнеры Windows в Windows10

Это упражнение посвящено основным аспектам развертывания и использования функции контейнеров Windows в Windows10 Профессиональная и Windows10 Корпоративная (Anniversary Edition). В его рамках вы установите Docker для Windows и запустите простой контейнер. Если вам необходимо ознакомиться с контейнерами, изучите раздел [О контейнерах](../about/index.md).

Это краткое руководство применимо только к Windows 10. Дополнительную документацию по быстрому началу работы можно найти в содержании в левой части этой страницы.

***Изоляция Hyper-V.*** Для использования контейнеров Windows Server требуется изоляции Hyper-V в Windows 10, чтобы разработчики получили одинаковую версию ядра и конфигурации, которая будет использоваться применяться в рабочей среде. Дополнительные сведения об этом см. на странице [Сведения о контейнерах Windows](../about/index.md).

**Необходимые условия**

- Одна физическая компьютерная система под управлением Windows 10 Anniversary Edition или Creators Update (Профессиональная или Корпоративная).   
- Это краткое руководство можно выполнять на виртуальной машине Windows10, однако при этом нужно включить вложенную виртуализацию. Дополнительные сведения см. в [руководстве по вложенной виртуализации](https://msdn.microsoft.com/en-us/virtualization/hyperv_on_windows/user_guide/nesting).

> Чтобы контейнеры Windows работали, необходимо установить критические обновления.
> Чтобы узнать версию ОС, запустите `winver.exe` и сравните указанную версию с версией в [журнале обновлений Windows10](https://support.microsoft.com/en-us/help/12387/windows-10-update-history).

> Убедитесь, что у вас установлена версия 14393.222 или более поздняя, перед тем как продолжить.  Эта версия соотносится с Windows 10 версии 1607, поэтому любой версии выше 1607 необходимо полностью поддерживается.

## <a name="1-install-docker-for-windows"></a>1. Установка Docker для Windows

[Скачайте Docker для Windows](https://store.docker.com/editions/community/docker-ce-desktop-windows) и запустите установщик (вам потребуется для входа в систему. Создайте учетную запись, если ее у вас нет уже). [Подробные инструкции по установке](https://docs.docker.com/docker-for-windows/install) доступны в документации по Docker.

## <a name="2-switch-to-windows-containers"></a>2. Переключение на контейнеры Windows

После установки в Docker для Windows по умолчанию будут запущены контейнеры Linux. Переключитесь на контейнеры Windows, используя меню области уведомлений Docker или выполнив следующую команду в командной строке PowerShell `& $Env:ProgramFiles\Docker\Docker\DockerCli.exe -SwitchDaemon`.

![](./media/docker-for-win-switch.png)

## <a name="3-install-base-container-images"></a>3. Установка базовых образов контейнеров

Контейнеры Windows создаются из базовых образов. Приведенная ниже команда извлекает базовый образ Nano Server.

```
docker pull microsoft/nanoserver
```

После его получения выполните команду `docker images`, чтобы вывести список установленных образов. В данном случае будет отображен образ Nano Server.

```
docker images

REPOSITORY             TAG                 IMAGE ID            CREATED             SIZE
microsoft/nanoserver   latest              105d76d0f40e        4 days ago          652 MB
```

> Прочтите лицензионное соглашение для образов ОС контейнеров Windows на странице [Лицензионное соглашение](../images-eula.md).

## <a name="4-run-your-first-container"></a>4. Запуск первого контейнера

В этом простом примере будет создан и развернут образ контейнера "Hello World". Для получения наилучших результатов выполните следующие команды в командной строке Windows или PowerShell с повышенными привилегиями.

> Интегрированная среда сценариев Windows PowerShell не работает в интерактивных сеансах с контейнерами. Даже если контейнер запускается, он зависает.

Сначала запустите контейнер с помощью интерактивного сеанса из образа `nanoserver`. После запуска контейнера в его рамках появится командная оболочка.  

```
docker run -it microsoft/nanoserver cmd
```

Внутри контейнера создайте простой скрипт "Привет мир".

```
powershell.exe Add-Content C:\helloworld.ps1 'Write-Host "Hello World"'
```   

После завершения выйдите из контейнера.

```
exit
```

Теперь создайте новый образ контейнера из измененного контейнера. Чтобы просмотреть список контейнеров, выполните следующую команду и запишите идентификатор контейнера.

```
docker ps -a
```

Выполните следующую команду для создания нового образа "Привет мир". Замените <containerid> на идентификатор контейнера.

```
docker commit <containerid> helloworld
```

После завершения вы получите пользовательский образ, содержащий скрипт "Привет мир". Чтобы убедиться в этом, используйте следующую команду.

```
docker images
```

Наконец, чтобы запустить контейнер, используйте команду `docker run`.

```
docker run --rm helloworld powershell c:\helloworld.ps1
```

В результате выполнения команды `docker run` создается контейнер Hyper-V из образа "Привет мир", затем запускается скрипт-пример "Привет мир" (выходные данные при этом выводятся в оболочке), после чего контейнер останавливается и удаляется.
В последующих кратких руководствах, посвященных Windows10 и контейнерам, будет подробно описано создание и развертывание приложений в контейнерах на базе Windows10.

## <a name="next-steps"></a>Дальнейшие действия

Перейдите к следующему учебнику, чтобы ознакомиться с примером [создания приложения](./building-sample-app.md)
