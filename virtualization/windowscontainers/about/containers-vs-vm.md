---
title: Контейнеры и виртуальные машины
description: В этом разделе обсуждаются некоторые ключевые сходства и различия между контейнерами и виртуальными машинами, а также когда может потребоваться использовать каждый из них. Контейнеры и виртуальные машины имеют свои преимущества. на самом деле многие развертывания контейнеров используют виртуальные машины в качестве операционной системы узла, а не работают непосредственно на оборудовании, особенно при работе с контейнерами в облаке.
keywords: DOCKER, контейнеры, ВМ, виртуальные машины
author: jasongerend
ms.author: jgerend
ms.date: 10/21/2019
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.openlocfilehash: 63150dfde007ec942446387064ad59f05b0aaa43
ms.sourcegitcommit: 1ca9d7562a877c47f227f1a8e6583cb024909749
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2019
ms.locfileid: "74910824"
---
# <a name="containers-vs-virtual-machines"></a>Контейнеры и виртуальные машины

В этом разделе обсуждаются некоторые ключевые сходства и различия между контейнерами и виртуальными машинами, а также когда может потребоваться использовать каждую из них. Контейнеры и виртуальные машины используют их. на самом деле многие развертывания контейнеров используют виртуальные машины как операционную систему главного компьютера, а не непосредственно на оборудовании, особенно при работе с контейнерами в облаке.

Общие сведения о контейнерах см. в разделе [Windows и контейнеры](index.md).

## <a name="container-architecture"></a>Архитектура контейнера

Контейнер — это изолированный, упрощенный приемник, предназначенный для запуска приложения в операционной системе узла. Контейнеры создаются поверх ядра операционной системы узла (что может рассматриваться как скрытая система операционной системы) и содержать только приложения и некоторые интерфейсы API и службы операционной системы, работающие в пользовательском режиме, как показано на этой схеме.

![Схема архитектуры, показывающая, как контейнеры работают на основе ядра](media/container-diagram.svg)

## <a name="virtual-machine-architecture"></a>Архитектура виртуальной машины

В отличие от контейнеров, виртуальные машины работают под управлением полной операционной системы, включая собственную ядро, как показано на этой схеме.

![Схема архитектуры, показывающая, как виртуальные машины выполняют полную операционную систему рядом с операционной системой узла](media/virtual-machine-diagram.svg)

## <a name="containers-vs-virtual-machines"></a>Контейнеры и виртуальные машины

В следующей таблице показаны некоторые сходства и различия этих дополняющих технологий.

|                 | Виртуальная машина  | Контейнер  |
| --------------  | ---------------- | ---------- |
| Изоляция       | Обеспечивает полную изоляцию от операционной системы узла и других виртуальных машин. Это полезно, когда важна строгая граница безопасности, например размещение приложений от конкурирующих компаний на одном сервере или в кластере. | Обычно предоставляет упрощенную изоляцию от узла и других контейнеров, но не предоставляет в качестве виртуальной машины надежную границу безопасности. (Вы можете повысить уровень безопасности с помощью [режима изоляции Hyper-V](../manage-containers/hyperv-container.md) , чтобы изолировать каждый контейнер в УПРОЩЕННОЙ виртуальной машине). |
| Операционная система | Выполняет полную операционную систему, включая ядро, поэтому требует больше системных ресурсов (ЦП, памяти и хранилища). | Выполняет часть операционной системы в пользовательском режиме и может быть адаптирована, чтобы содержать только необходимые службы для приложения, используя меньше системных ресурсов. |
| Совместимость с гостевой системой | Работает практически с любой операционной системой в виртуальной машине | Выполняется в той [же версии операционной системы, что и узел](../deploy-containers/version-compatibility.md) (изоляция Hyper-V позволяет запускать более ранние версии одной и той же ОС в среде УПРОЩЕННОЙ виртуальной машины).
| Развертывание     | Развертывание отдельных виртуальных машин с помощью центра администрирования Windows или диспетчера Hyper-V; Развертывание нескольких виртуальных машин с помощью PowerShell или System Center Virtual Machine Manager. | Развертывание отдельных контейнеров с помощью DOCKER через командную строку; Развертывание нескольких контейнеров с помощью Orchestrator, например службы Azure Kubernetes. |
| Обновление операционной системы и обновления | Скачайте и установите обновления операционной системы на каждой виртуальной машине. Для установки новой версии операционной системы требуется обновить или часто создать полностью новую виртуальную машину. Это может занять много времени, особенно если у вас много виртуальных машин... | Обновление или обновление файлов операционной системы в контейнере выполняется одинаково: <br><ol><li>Измените файл сборки образа контейнера (известный как Dockerfile), чтобы он указывал на последнюю версию базового образа Windows. </li><li>Перестройте образ контейнера с новым базовым образом.</li><li>Отправьте образ контейнера в реестр контейнеров.</li> <li>Повторное развертывание с помощью Orchestrator.<br>Orchestrator предоставляет широкие возможности автоматизации для масштабирования. Дополнительные сведения см. [в разделе Учебник. Обновление приложения в службе Kubernetes Azure](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-app-update).</li></ol> |
| Постоянное хранилище | Использование виртуального жесткого диска (VHD) для локального хранилища для одной виртуальной машины или общего файлового ресурса SMB для хранилища, общего для нескольких серверов | Используйте диски Azure для локального хранилища для одного узла или службы файлов Azure (общие ресурсы SMB) для хранилища, совместно используемого несколькими узлами или серверами. |
| Балансировка нагрузки | Балансировка нагрузки виртуальной машины перемещает выполняющиеся виртуальные машины на другие серверы в отказоустойчивом кластере. | Сами контейнеры не перемещаются; Вместо этого Orchestrator может автоматически запускать или прекращать работу контейнеров на узлах кластера для управления изменениями в нагрузке и доступности. |
| Отказоустойчивость | Виртуальные машины могут выполнить отработку отказа на другой сервер в кластере с перезапуском операционной системы виртуальной машины на новом сервере.  | В случае сбоя узла кластера все контейнеры, работающие на нем, быстро воссоздаются Orchestrator на другом узле кластера. |
| Возможности работы с сетями в     | Использует виртуальные сетевые адаптеры. | Использует изолированное представление виртуального сетевого адаптера, предоставляя меньшую виртуализацию — брандмауэр узла используется совместно с контейнерами, при этом используется меньше ресурсов. Дополнительные сведения см. в разделе [Сетевые подключения контейнеров Windows](../container-networking/architecture.md). |