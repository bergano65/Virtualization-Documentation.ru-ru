---
title: Контейнеры и виртуальные машины
description: В этом разделе обсуждаются некоторые ключевые сходства и различия между контейнерами и виртуальными машинами, а также необходимость использования каждого из них. Для контейнеров и виртуальных машин используются виртуальные машины в качестве операционной системы узла, а не непосредственно на оборудовании, особенно при запуске контейнеров в облаке.
keywords: стыковочный узел, контейнеры, ВМ, виртуальные машины
author: jasongerend
ms.author: jgerend
ms.date: 10/21/2019
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.openlocfilehash: 63150dfde007ec942446387064ad59f05b0aaa43
ms.sourcegitcommit: d0411b05d1ef7328a770766b84fd0743f9d9c237
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2019
ms.locfileid: "10254419"
---
# <a name="containers-vs-virtual-machines"></a>Контейнеры и виртуальные машины

В этой статье обсуждаются некоторые ключевые сходства и различия между контейнерами и виртуальными машинами (ВМ), а также необходимость использования каждой из них. В контейнерах и виртуальных машинах используются виртуальные возможности — на самом деле, многие развертывания контейнеров используют ВМ в качестве операционной системы узла, а не непосредственно на оборудовании, особенно при запуске контейнеров в облаке.

Общие сведения о контейнерах можно найти в разделе [окна и контейнеры](index.md).

## <a name="container-architecture"></a>Архитектура контейнера

Контейнер — это изолированный, Облегченный приемник для запуска приложения в операционной системе узла. Контейнеры выводятся в верхней части ядра операционной системы хоста (которая может рассматриваться как скрытая система операционной системы) и содержит только приложения и некоторые API и службы операционной системы, которые выполняются в пользовательском режиме, как показано на этой схеме.

![Архитектурная схема, показывающая, как контейнеры работают на вершине ядра](media/container-diagram.svg)

## <a name="virtual-machine-architecture"></a>Архитектура виртуальных машин

В отличие от контейнеров, ВМ выполняют полную операционную систему, включая ядро, как показано на этой схеме.

![Архитектурная схема, показывающая, как виртуальные машины выполняют полную операционную систему рядом с операционной системой узла.](media/virtual-machine-diagram.svg)

## <a name="containers-vs-virtual-machines"></a>Контейнеры и виртуальные машины

В следующей таблице показаны некоторые сходства и отличия этих комплементарных технологий.

|                 | Виртуальная машина  | Контейнер  |
| --------------  | ---------------- | ---------- |
| Привод       | Обеспечивает полную изоляцию от операционной системы узла и других виртуальных машин. Это полезно, если надежная граница безопасности является критической, например размещение приложений от конкурирующих компаний на том же сервере или кластере. | Обычно является облегченной изоляцией из главного и других контейнеров, но не предоставляется в качестве надежной границы безопасности в качестве виртуальной машины. (Вы можете улучшить безопасность с помощью [режима изоляции Hyper-V](../manage-containers/hyperv-container.md) , чтобы изолировать каждый контейнер в ОБЛЕГЧЕННОЙ виртуальной машине). |
| Операционная система | Запускает полную операционную систему, включая ядро, таким образом, что требуются дополнительные системные ресурсы (ЦП, память и хранилище). | Запускает часть операционной системы в пользовательском режиме и может быть адаптирована таким образом, чтобы она содержала только необходимые службы для вашего приложения, используя меньше системных ресурсов. |
| Одногостевая совместимость | Выполнение практически любой операционной системы внутри виртуальной машины | Работает в той [же версии операционной системы, что и узел](../deploy-containers/version-compatibility.md) (изоляция Hyper-V), позволяет запускать более ранние версии одной и той же ОС в облегченной среде ВМ.
| Развертывание     | Развертывание отдельных виртуальных машин с помощью центра администрирования Windows или диспетчера Hyper-V; Развертывание нескольких виртуальных машин с помощью PowerShell или диспетчера виртуальных машин System Center. | Развертывание отдельных контейнеров с помощью Dock через командную строку; Развертывание нескольких контейнеров с помощью Orchestrator, например службы Azure Кубернетес Service. |
| Обновления операционной системы и модернизация | Скачайте и установите обновления операционной системы на каждой виртуальной машине. Установка новой версии операционной системы требует обновления или частое создание только новой виртуальной машины. Это может занять некоторое время, особенно если у вас много виртуальных машин... | Обновление или обновление файлов операционной системы в контейнере одинаково: <br><ol><li>Измените файл сборки (например, Доккерфиле), чтобы он указывал на последнюю версию базового образа Windows. </li><li>Перестройте свое изображение контейнера с новым базовым изображением.</li><li>Помещаете изображение контейнера в реестр контейнера.</li> <li>Повторное развертывание с помощью Orchestrator.<br>Orchestrator предоставляет широкие возможности автоматизации для работы с масштабами. Подробности можно найти [в разделе Учебник: обновление приложения в службе Кубернетес Azure](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-app-update).</li></ol> |
| Постоянное хранилище | Использование виртуального жесткого диска (VHD) для локального хранилища для одной виртуальной машины или общего файлового файла SMB для хранения данных, доступного нескольким серверам | Используйте диски Azure для локального хранилища для одного узла или файлов Azure (общие ресурсы SMB) для хранилища, доступного нескольким узлам или серверам. |
| Балансировка нагрузки | Балансировка нагрузки виртуальных машин перемещает запущенные виртуальные машины на другие серверы в отказоустойчивом кластере. | Контейнеры сами не перемещаются; Вместо этого Orchestrator может автоматически запускать или останавливать контейнеры на узлах кластера для управления изменениями в загрузке и доступности. |
| Отказоустойчивость | Виртуальные машины могут переключиться на другой сервер в кластере с помощью операционной системы виртуальной машины, перезапускаемой на новом сервере.  | Если узел кластера не работает, все контейнеры, запущенные на нем, быстро воссоздаются в Orchestrator на другом узле кластера. |
| Сеть     | Использует виртуальные сетевые адаптеры. | Использует изолированное представление виртуального сетевого адаптера, обеспечивая немного меньше возможностей виртуализации, а брандмауэр узла используется совместно с контейнерами, а не с меньшими ресурсами. Дополнительные сведения можно найти в разделе [контейнеры сети Windows](../container-networking/architecture.md). |